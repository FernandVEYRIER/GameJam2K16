using UnityEngine;
using System.Collections;
using Assets.Scripts;

public class MissileController : MonoBehaviour {

	[SerializeField] private GameObject explosionPrefab = null;

	public float speed = 10;
	Direction currentDir = Direction.TOP;
    Vector2 targetCoordinateTop = new Vector2(47, 50);

	// Use this for initialization
	void Start () {
	}
	
	// Update is called once per frame
	void Update ()
	{
		transform.position += transform.up * speed * Time.deltaTime;
	}

	public bool UpdateTarget(Direction dir)
	{
		switch (dir)
		{
		case Direction.TOP:
			transform.localRotation = Quaternion.Euler (0, 0, 0);
			break;
		case Direction.DOWN:
			transform.localRotation = Quaternion.Euler(0, 0, 180);
			break;
		case Direction.LEFT:
			transform.localRotation = Quaternion.Euler (0, 0, 270);
			break;
		case Direction.RIGHT:
			transform.localRotation = Quaternion.Euler (0, 0, 90);
			break;
		}
		currentDir = dir;
		return true;
	}

	public void InvertTarget()
	{
		int curr = (int)currentDir;

		curr *= -1;
		UpdateTarget ((Direction)curr);
	}

	void OnTriggerEnter2D(Collider2D col)
	{
		if (col.gameObject.tag == "Ground")
		{
<<<<<<< HEAD
            Debug.Log("hi");
			//Instantiate (explosionPrefab, transform.position, Quaternion.identity);
=======
			if (explosionPrefab != null)
				Instantiate (explosionPrefab, transform.position, Quaternion.identity);
>>>>>>> 950f28a63b5552e45a4f7b8564feea88a8be6aa7
			Destroy (gameObject);
		}
	}
}
